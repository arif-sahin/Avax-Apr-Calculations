<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avacabus</title>
    <link rel="stylesheet" href="./sytle.css">
</head>
<body>
    
    <!-- Fetching Data -->
    <div id="loading">
        <div class="spinner"></div>
        <div id="loadingText">Connecting Snowpeer, Fetching Data...</div>
    </div> 
    <header class="header">
        <div class="header-content"> 
            <h1>Avacabus
                <div class="tooltip-wrap" tabindex="0">
                <div class="tooltip-icon">i</div>
                <div class="tooltip-box bottom">
                    Calculations use the official <a href="https://build.avax.network/docs/primary-network/validate/rewards-formula" target="_blank">Avalanche Protocol Formula</a>.
                    <br><br>
                    Data is fetched live from the <a href="https://snowpeer.io/">Snowpeer</a>
                </div>
                </div>
            </h1>
        </div>
    </header>
    <!---main-->
    <main class="main-content">
        <div class="container">
            <!--Role-->
        <div class="role-select">
            <button class="roleBtn active" onclick="setRole('delegator')">I'm Delegator</button>
            <button class="roleBtn" onclick="setRole('validator')">I'm Validator</button>
        </div>

        <!--Inputs-->
        <div class="stake-card">

            <div class="form-group">
                <label>Stake Amount</label>
                <input type="number" id="myStake" min="25" value="25">
                <div class="small-note" id="minStake">Minimium 25 AVAX required</div>
            </div>

            <div class="form-group" id="feeSection">
                <label>Fee Selection</label>
                <input type="number" id="feeAmount" min="2" max="100" value="2">
                <div class="small-note">Minimum fee is 2%</div>
            </div>

            <div class="form-group">
                <label>Staking Period</label>

                <!-- Date Picker -->
                <div class="date-grid">
                    <div>
                        <span class="small-note" style="display: block; margin-bottom: 4px;">Start Date</span>
                        <input type="datetime-local" id="startDate" onchange="syncFromDates()">
                    </div>
                    <div>
                        <span class="small-note" style="display: block; margin-bottom: 4px;">End Date</span>
                        <input type="datetime-local" id="endDate" onchange="syncFromDates()">
                    </div>
                </div>

                <label style="margin-top: 15px;">Duration (Days)</label>
                <input type="number" id="myDays" min="14" max="365" value="14" oninput="syncFromNumber()">
                <div class="small-note">Min 14 Days, Max 365 Days</div>

                <!-- Preset Buttons -->
                 <div class="preset-buttons">
                    <button class="preset-btn" onclick="setPresetDays(14)">14d (Min)</button>
                    <button class="preset-btn" onclick="setPresetDays(30)">30d</button>
                    <button class="preset-btn" onclick="setPresetDays(180)">6M</button>
                    <button class="preset-btn" onclick="setPresetDays(365)">1y (Max)</button>                    
                </div>
            </div>

            <!-- Warning Box -->
            <div id="warningBox">
                ⚠️ Staking duration is minimum 14, maxium 365 days.
            </div>

            <button class="btn-calc" type="button" onclick="calculate()">Calculate</button>
        </div>

        

        <!--Result-->
        <div class="result-card">
            <div class="est-reward">
                <span class="result-label">Estimated Reward </span>
                <span class="result-val"><span id="estimatedReward">0.00</span> AVAX</span>
                <!-- Price -->
                <div id="usdOutput" class="usd-subtext">≈ 0.00 <span>$</span></div>
            </div>
            <div class="est-reward">
                <span class="result-label">
                    Apr(Simple) 
                    <div class="tooltip-wrap" tabindex="0">
                        <div class="tooltip-icon">i</div>
                        <div class="tooltip-box top">
                            <strong>Simple Interest</strong><br>
                            The annualized rate if you do <em>not</em> restake your rewards.
                        </div>
                    </div>
                </span>
                <span class="result-val" style="color: white;"><span id="aprOutput">0.00</span>%</span>
            </div>
            <div class="est-reward">
                <span class="result-label">
                    APY(Compound) 
                    <div class="tooltip-wrap" tabindex="0">
                        <div class="tooltip-icon">i</div>
                        <div class="tooltip-box top">
                            <strong>Compound Interest</strong><br>
                            The annualized rate if you restake your rewards at the end of every period.
                        </div>
                    </div>
                </span>
                <span class="result-val" style="color: white;"><span id="apyOutput">0.00</span>%</span>
            </div>

            <!-- Daily- Yearly Reward (Based on Apy) -->
            <div class="projection-title">Projected Earnings (With Compounding)</div>
            <div class="projection-grid">
                <div class="proj-card">
                    <div class="proj-label">Daily</div>
                    <div class="proj-val"><span id="projDaily">0.00</span> AVAX</div>
                    <div id="usdDaily" class="usd-subtext">≈ 0.00 <span>$</span></div>
                </div>
                <div class="proj-card">
                    <div class="proj-label">Weekly</div>
                    <div class="proj-val"><span id="projWeekly">0.00</span> AVAX</div>
                    <div id="usdWeekly" class="usd-subtext">≈ 0.00 <span>$</span></div>
                </div>
                <div class="proj-card">
                    <div class="proj-label">Monthly</div>
                    <div class="proj-val"><span id="projMonthly">0.00</span> AVAX</div>
                    <div id="usdMonthly" class="usd-subtext">≈ 0.00 <span>$</span></div>
                </div>
                <div class="proj-card">
                    <div class="proj-label">Yearly</div>
                    <div class="proj-val"><span id="projYearly">0.00</span> AVAX</div>
                    <div id="usdYearly" class="usd-subtext">≈ 0.00 <span>$</span></div>
                </div>
            </div>
            
        </div>
        
        </div>
        
    </main>

    <!-- footer -->
     <footer class="footer">
        <p>Built by @ - Powered by Snowpeer</p>
     </footer>

    <script src="./script.js"></script>
</body>
</html>